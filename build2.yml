version: 0.2

env:
  shell: bash
phases:
  install:
    commands:
      - echo "in install phase"

  pre_build:
    commands:
      - pwd
      - ls -al
  build:
    commands:
      # create file with version in it
      - mkdir artifacts_codebuild
      - mkdir -p qa/jw/shared
      - mv qa/jw/shared artifacts_codebuild

      # run gadget job for npm:pack
      # TODO: move from python to here
     # - $CODEBUILD_SRC_DIR/gadget run-job web/$AUTO_ACTION

      - ls -al artifacts_codebuild

      # list what should be in artifact
      - ls -al artifacts_codebuild

artifacts:
  files:
    - '**/*'
  base-directory: artifacts_codebuild
  name: $ARTIFACT_NAME
